@page "/recipes/details/{id:int}"
@inject HttpClient httpClient

<style>
    body {
        background-color: lightgray;
    }
</style>

<MudGrid>
    <MudItem xs="2">
        <h3>Recipe <strong class="text-black-50" style="font-size: 25px;">#@this.Id</strong></h3>
    </MudItem>
</MudGrid>

<div class="bg-light">
    <MudGrid>
        <MudItem xs="4">
            <h2>Medical</h2>
            <p>@this.viewModel.PatientAddress</p>
            <p>@this.viewModel.PatientCity</p>
            <p>@this.viewModel.PatientState</p>
            <p>@this.viewModel.PatientPhone</p>
            <p>@this.viewModel.PatientEmail</p>
        </MudItem>
        <MudItem xs="8">
            <img src="https://medical.san-solutions.net/img/logo2.png" alt="medical" />
        </MudItem>
    </MudGrid>

    <div class="text-center" style="background-image: url(https://medical.san-solutions.net/img/back.png)">
        <hr />
        <h1 class="text-secondary">Recipe #@this.Id</h1>
        <hr />
    </div>

    <MudGrid>
        <MudItem xs="4">
            <MudGrid>
                <MudItem xs="6">
                    <p class="text-black-50">CLIENT</p>
                </MudItem>
                <MudItem xs="6">
                    <p>@this.viewModel.Patient</p>
                </MudItem>
                <MudItem xs="6">
                    <p class="text-black-50">ADDRESS</p>
                </MudItem>
                <MudItem xs="6">
                    <p>@this.viewModel.PatientAddress</p>
                </MudItem>
                <MudItem xs="6">
                    <p class="text-black-50">PHONE NUMBER</p>
                </MudItem>
                <MudItem xs="6">
                    <p>@this.viewModel.PatientPhone</p>
                </MudItem>
                <MudItem xs="6">
                    <p class="text-black-50">E-MAIL</p>
                </MudItem>
                <MudItem xs="6">
                    <p>@this.viewModel.PatientEmail</p>
                </MudItem>
                <MudItem xs="6">
                    <p class="text-black-50">DATE</p>
                </MudItem>
                <MudItem xs="6">
                    <p>@this.viewModel.Date.ToString("MM/dd/yyyy", CultureInfo.InvariantCulture)</p>
                </MudItem>
            </MudGrid>
        </MudItem>
        <MudItem xs="4">

        </MudItem>
        <MudItem xs="4">
            <MudGrid>
                <MudItem xs="6">
                    <p class="text-black-50">DOCTOR</p>
                </MudItem>
                <MudItem xs="6">
                    <p>@this.viewModel.Doctor</p>
                </MudItem>
                <MudItem xs="6">
                    <p class="text-black-50">E-MAIL</p>
                </MudItem>
                <MudItem xs="6">
                    <p>@this.viewModel.DoctorEmail</p>
                </MudItem>
                <MudItem xs="6">
                    <p class="text-black-50">DATE</p>
                </MudItem>
                <MudItem xs="6">
                    <p>@this.viewModel.Date.ToString("dd/MM/yyyy", CultureInfo.InvariantCulture)</p>
                </MudItem>
            </MudGrid>
        </MudItem>
    </MudGrid>

    <table class="table table-striped table-hover">
        <tbody>
            <tr class="text-secondary">
                <th>Medicine</th>
            </tr>
            <tr>
                <td>
                    @foreach (var medicine in this.viewModel.Medicines)
                    {
                        <p>&#9642; @medicine</p>
                    }
                </td>
            </tr>
            <tr class="text-secondary">
                <th>Description</th>
            </tr>
            <tr>
                <td>
                    <p>@this.viewModel.Description</p>
                </td>
            </tr>
            <tr class="text-secondary">
                <th>Other Informations</th>
            </tr>
            <tr>
                <td>
                    <p>@this.viewModel.OtherInfo</p>
                </td>
            </tr>
        </tbody>
    </table>
</div>

@code {
    private RecipeByIdViewModel viewModel = new RecipeByIdViewModel();

    protected override async Task OnInitializedAsync()
    {
        this.viewModel = await this.httpClient.GetFromJsonAsync<RecipeByIdViewModel>($"Recipes/Details/{this.Id}");
    }

    [Parameter]
    public int Id { get; set; }
}  